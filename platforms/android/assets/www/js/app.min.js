function init(){document.addEventListener("deviceready",onDeviceReady,!1),delete init}function onDeviceReady(){function e(){"true"===window.localStorage.getItem("session")}function a(){$.mobile.activePage.is("#pageDashboard")||($.mobile.activePage.is("#pageLogin")?navigator.app.exitApp():navigator.app.backHistory())}function o(){$("#panelMenu").panel("open")}"true"===window.localStorage.getItem("session")&&$.mobile.changePage("#pageDashboard"),document.addEventListener("resume",e,!1),document.addEventListener("backbutton",a,!1),document.addEventListener("menubutton",o,!1),$("#btnLogin").on("click",function(e){return e.preventDefault(),$.ajax({type:"GET",url:baseURI+"/APILogin?jsoncallback=?",data:$("#appLogin").serialize(),dataType:"json",beforeSend:function(){$.mobile.loading("show")},success:function(e){setTimeout(function(){1==e.success?($.mobile.loading("hide"),showAlert(e.message,"Autenticación Satisfactoria","Ir al Dashboard"),$.mobile.changePage("#pageDashboard"),console.log(e),window.localStorage.setItem("session","true"),window.localStorage.setItem("nombre",e.nombre),window.localStorage.setItem("username",e.username),window.localStorage.setItem("email",e.email),window.localStorage.setItem("apem",e.apem),window.localStorage.setItem("apep",e.apep),window.localStorage.setItem("date",e.date),proyectosIniciados(),proyectosCurso()):($.mobile.loading("hide"),showAlert(e.message,"Autenticación Erronea","Volver a Intentar"),console.log(e))},1e3)}}),!1}),$("#btnLogout").on("click",function(e){e.preventDefault(),window.localStorage.clear(),$.mobile.changePage("#pageLogin")}),$("#refreshProjects").on("click",function(e){e.preventDefault(),console.log("ok"),proyectosIniciados(),proyectosCurso()}),$("#projectList").on("click","#item",function(){var e=this.getAttribute("data-id");$.ajax({type:"GET",url:baseURI+"/verProyecto/"+e+"?jsoncallback=?",dataType:"json",success:function(e){console.log(e),$("#menu p").remove(),$.each(e,function(e,a){var o="<p>"+a+"</p>";$(o).appendTo("#"+e),console.log("This is "+e+" , the content is "+a)}),$.mobile.changePage("#projectPage")}})}),$("#bckbutton").on("click",function(){$.mobile.changePage("#pageDashboard")}),$("#panelMenu").trigger("updatelayout"),$("#pageDashboard").swipe(function(){$("#panelMenu").panel("open")}),$("#pageDashboard").swipeLeft(function(){$("#panelMenu").panel("close")})}function alerts(e){alert(e)}function proyectosCurso(){var e=window.localStorage.getItem("email");$.ajax({type:"GET",url:baseURI+"/proyectosCurso?jsoncallback=?",data:{email:e},dataType:"json",success:function(e){if($(".app-append-two").remove(),null!=e)for(var a=0;a<e.length;a++)$("#prosNuevos").after('<li id="item" data-id="'+e[a].id_proyecto+'" class="box waves-effect app-append-two"><div><p><b>Nombre</b></p><p>'+e[a].p_nombre+"</p><p><b>Descripción</b></p><p>"+e[a].p_descri+"</p><p><b>Fecha y Hora: </b>"+e[a].p_fecha+"</p><p><b>Categoría: </b>"+e[a].p_cat+"</p></div></li>");else $("#prosNuevos").after('<li id="item" class="box waves-effect app-append-two"><div><p class="center" style="font-size: .7em;"><span class="icon-info2" style="padding-right: 5px;"></span> No hay proyectos nuevos.</p></div></li>')}})}function proyectosIniciados(){var e=window.localStorage.getItem("email");$.ajax({type:"GET",url:baseURI+"/proyectosIniciados?jsoncallback=?",data:{email:e},dataType:"json",success:function(e){if($(".app-append").remove(),null!=e)for(var a=0;a<e.length;a++)$("#prosIniciados").after('<li id="item" data-id="'+e[a].id_proyectos+'" class="box waves-effect app-append"><div><p><b>Nombre</b></p><p>'+e[a].p_nombre+"</p><p><b>Descripción</b></p><p>"+e[a].p_descri+"</p><p><b>Fecha y Hora: </b>"+e[a].p_fecha+"</p><p><b>Categoría: </b>"+e[a].p_cat+"</p></div></li>");else $("#prosIniciados").after('<li id="item" class="box waves-effect app-append"><div><p class="center" style="font-size: .7em;"><span class="icon-info2" style="padding-right: 5px;"></span> No hay proyectos en curso.</p></div></li>')}})}function alertDismissed(){}function showAlert(e,a,o){navigator.notification.alert(e,alertDismissed,a,o)}var baseURI="http://192.168.1.71/webapnote/API";